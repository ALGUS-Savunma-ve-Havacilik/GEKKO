webpackJsonp([1],{"/NwD":function(t,o){},0:function(t,o){},"7vY8":function(t,o){},NHnr:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e("7+uW"),n=e("aK3Z"),s=e.n(n),i={name:"App",data:function(){return{showModal:!1,httpError:{header:"",body:"",report:"Please report any Gekko project errors as\n          issues at https://github.com/BYU-PRISM/GEKKO"}}},mounted:function(){setTimeout(this.poll,1e3),this.$store.dispatch("initialize")},methods:{poll:function(){var t=this;this.$http.get("poll").then(function(o){t.showModal=!1,t.$store.commit("setCommunicationError",!1),setTimeout(t.poll,1e3)},function(o){console.log("HTTP Polling Error, Status:",o.status,"Message:",o.statusText),0===o.status?(t.httpError.header="Internal Communication Error",t.httpError.body="We seem to have lost communication with your\n                                  Gekko script. This means that we cannot get\n                                  any updates from your Gekko model.\n                                  Did you stop the script or did\n                                  it crash? If so, close this window and restart\n                                  it."):(t.httpError.header="Internal Communication Error",t.httpError.body="Please copy these details in an error report\n                                  to the Gekko developers. Error Code:\n                                  "+o.status+", Error: "+o.statusText),t.showModal=!0,t.$store.commit("setCommunicationError",!0)})}}},r={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"modal"}},[t.showModal?e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n              "+t._s(t.httpError.header)+"\n            ")])],2),t._v(" "),e("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n              "+t._s(t.httpError.body)+"\n            ")])],2),t._v(" "),e("div",{staticClass:"modal-body"},[t._t("error-reporting",[t._v("\n              "+t._s(t.httpError.report)+"\n            ")])],2),t._v(" "),e("div",{staticClass:"modal-footer"},[t._t("footer",[e("button",{staticClass:"modal-default-button",on:{click:function(o){t.showModal=!1}}},[t._v("\n                OK\n              ")])])],2)])])]):t._e()]),t._v(" "),e("router-view")],1)},staticRenderFns:[]};var l=e("VU/8")(i,r,!1,function(t){e("vdqc")},null,null).exports,c=e("pH0I"),d=e.n(c),u=this;window.onresize=function(){u.plotlyResize};var p={name:"Plot",props:{externalId:{type:Number,default:1}},data:function(){return{id:Math.random().toString(36).substring(7)}},computed:{data:function(){var t=this;return this.$store.state.plots.filter(function(o){return o.id===t.externalId})[0].data},layout:function(){var t=this;return this.$store.state.plots.filter(function(o){return o.id===t.externalId})[0].layout}},watch:{numPlots:function(){console.log("numPlots changed, resizing plot"),u.plotlyResize},plotData:function(t){d.a.newPlot(u.id,t,u.layout)}},beforeDestroy:function(){window.removeEventListener("resize",this.plotlyResize)},mounted:function(){window.addEventListener("resize",this.plotlyResize),console.log("plot layout",this.layout),d.a.newPlot(this.id,this.data,this.layout)},methods:{plotlyResize:function(){d.a.Plots.resize(this.id)},removePlot:function(){this.$store.commit("removePlot",this.externalId)}}},h={render:function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"plot-div"},[this.$store.state.plots.length>2&&0!=this.externalId?o("button",{staticClass:"btn btn-sm btn-danger plot-close",attrs:{type:"button"},on:{click:this.removePlot}},[this._v("X")]):this._e(),this._v(" "),o("div",{attrs:{id:this.id}})])},staticRenderFns:[]};var v=e("VU/8")(p,h,!1,function(t){e("gu9Q")},null,null).exports,m={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("img",{attrs:{src:"/static/GekkoLogo.png",height:"65px"}}),t._v(" "),e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"nav-item tab"},[e("a",{staticClass:"nav-link ",class:{active:"Model"==t.activeTab},on:{click:function(o){t.activeTab="Model"}}},[t._v("Model")])]),t._v(" "),e("li",{staticClass:"nav-item tab"},[e("a",{staticClass:"nav-link",class:{active:"Variables"==t.activeTab},on:{click:function(o){t.activeTab="Variables"}}},[t._v("Variables")])])]),t._v(" "),e("div",{staticClass:"tab-div"},[e("transition",{attrs:{name:"fade"}},["Model"===t.activeTab?[e("div",{staticClass:"table-responsive tab-table"},[e("table",{staticClass:"table table-striped table-sm"},[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Value")])])]),t._v(" "),e("tbody",t._l(t.modelData,function(o,a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a))]),t._v(" "),e("td",[t._v(t._s(o))])])}))])])]:t._e()],2),t._v(" "),e("transition",{attrs:{name:"fade"}},["Variables"===t.activeTab?[t.varsData?e("div",{staticClass:"tab-table"},[e("div",{staticStyle:{"overflow-y":"auto","max-height":"inherit"}},t._l(t.varsData,function(o,a){return e("ul",{key:o.id,staticClass:"tab-table-item"},[e("a",{staticClass:"var-dropdown",on:{click:function(e){t.toggle(o,a)}}},[t._v("\n                "+t._s(a)+" "+t._s(o.ishidden?"►":"▼")+"\n              ")]),t._v(" "),e("transition",{attrs:{name:"fade"}},[o.ishidden?t._e():e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-striped table-sm"},[e("thead",[e("tr",[e("th",[t._v("Property")]),t._v(" "),e("th",[t._v("Value")])])]),t._v(" "),e("tbody",t._l(o,function(o,a){return e("tr",{key:a.id},["ishidden"!=a?e("td",[t._v(t._s(a))]):t._e(),t._v(" "),"ishidden"!=a?e("td",[t._v(t._s(Number.isInteger(o)&&o<=1e5&&o>-1e5?o:o.toExponential(4)))]):t._e()])}))])])])],1)}))]):t._e()]:t._e()],2)],1)])},staticRenderFns:[]};var f=e("VU/8")({name:"Tabs",data:function(){return{activeTab:"Model",open:!1}},computed:{modelData:function(){return this.$store.state.modelData},varsData:function(){return this.$store.state.varsData}},methods:{toggle:function(t,o){t.ishidden=!t.ishidden,this.$forceUpdate()}}},m,!1,function(t){e("7vY8")},null,null).exports,_=e("8+8L"),b=e("/ocq"),y={components:{plot:v},data:function(){return{}}},g={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-fullscreen-container"},[e("div",{staticClass:"modal-body"},[t._t("body",[e("plot",{attrs:{"external-id":0}})])],2),t._v(" "),e("div",{staticClass:"modal-footer"},[t._t("footer",[e("button",{on:{click:function(o){t.$emit("close",{})}}},[t._v("Close")])])],2)])])])])},staticRenderFns:[]};var P={name:"Main",components:{plot:v,tabs:f,modalPlot:e("VU/8")(y,g,!1,function(t){e("/NwD")},null,null).exports},data:function(){return{}},computed:{plotArray:function(){return this.$store.state.plots},displayPlots:function(){return this.plotArray.filter(function(t){return 0!==t.id})},statusStyle:function(){return{border:this.$store.state.communicationError?"red 2px":"green 2px",padding:"3px",borderTopLeftRadius:"2px",borderStyle:"solid",color:this.$store.state.communicationError?"red":"green"}}},mounted:function(){},methods:{addPlot:function(){this.$store.commit("addPlot")},removePlot:function(t){console.log("Removing plot",t),this.$store.commit("removePlot",t)},hideModalPlot:function(){this.$store.commit("hideFullscreenPlot")},showModalPlot:function(){this.$store.commit("showFullscreenPlot")}}},C={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"mainDiv"},[t.$store.state.fullscreenPlot?e("modalPlot",{on:{close:t.hideModalPlot}}):t._e(),t._v(" "),e("div",{staticClass:"row",staticStyle:{"margin-right":"0px"}},[e("div",{staticClass:"col-sm-3"},[e("tabs")],1),t._v(" "),e("div",{staticClass:"col-sm-9"},[e("div",{staticClass:"plots-div"},t._l(t.displayPlots,function(t){return e("div",{key:t.id},[e("plot",{attrs:{"external-id":t.id}})],1)})),t._v(" "),e("button",{staticClass:"btn btn-primary",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:t.addPlot}},[t._v("Add Plot")]),t._v(" "),e("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:t.showModalPlot}},[t._v("Fullscreen plot")])])])],1)},staticRenderFns:[]};var w=e("VU/8")(P,C,!1,function(t){e("VTK5")},null,null).exports;a.a.use(b.a);var E=new b.a({routes:[{path:"/",name:"Main",component:w}]}),M=e("rCTf"),k=e("fZjL"),D=e.n(k),x=e("NYxO"),$=e("mtWM"),T=e.n($).a.create({baseURL:"http://"+location.hostname+":"+location.port,headers:{"Access-Control-Allow-Origin":"*"}});a.a.use(x.a);var I=new x.a.Store({state:{numPlots:0,communicationError:!1,fullscreenPlot:!1,plotIdCounter:0,plots:[],plotData:{},modelData:{},varsData:{},showErrorModal:!1,httpError:{header:"",body:"",report:"Please report any Gekko project errors as\n        issues at https://github.com/BYU-PRISM/GEKKO"}},mutations:{removePlot:function(t,o){t.numPlots--,t.plots=t.plots.filter(function(t){return t.id!==o})},addPlot:function(t,o){t.plots.push({id:t.plotIdCounter,data:t.plotData,layout:{}}),t.plotIdCounter++,t.numPlots++},setCommunicationError:function(t,o){t.communicationError=o},showFullscreenPlot:function(t){t.fullscreenPlot=!0},hideFullscreenPlot:function(t){t.fullscreenPlot=!1},updatePlotData:function(t,o){t.plotData=o},updatePlotLayout:function(t,o){t.plots.filter(function(t){return t.id===o.id})[0].layout=o.layout},setModelData:function(t,o){t.modelData=o},setVarsData:function(t,o){t.varsData=o},showErrorModal:function(t,o){t.showErrorModal=!0},hideErrorModal:function(t,o){t.showErrorModal=!1}},actions:{initialize:function(t){var o=t.commit;t.state;T.get("/get_data").then(function(t){return t.data}).then(function(t){var e=[];console.log("get_data data:",t);var a=D()(t).length>5;for(var n in t)if(t.hasOwnProperty(n)&&"time"!==n){var s={x:t.time,y:t[n],mode:"lines",type:"scatter",name:n,visible:a?"legendonly":"true"};e.push(s)}o("updatePlotData",e),o("addPlot"),o("updatePlotLayout",{id:0,layout:{height:window.innerHeight-150}}),o("addPlot")}).catch(function(t){console.log("Error fetching from get_data:",t)});var e=["INFO","APM"],a=void 0,n={};T.get("get_options").then(function(t){return t.data}).then(function(t){return a=t,console.log("options:",t),D()(t).filter(function(t){return!e.includes(t)})}).then(function(t){t.forEach(function(t){return n[t]=a[t],n[t].ishidden=!0,null})}).then(function(){o("setVarsData",n),console.log("varsData:",n)}),T.get("get_model").then(function(t){return t.data}).then(function(t){o("setModelData",t),console.log("model:",t)})}}});a.a.use(s.a,{Observable:M.Observable}),a.a.use(_.a),a.a.config.productionTip=!1,a.a.http.options.root="http://"+location.hostname+":"+location.port,new a.a({el:"#app",store:I,router:E,components:{App:l,Plot:v,Tabs:f},template:"<App/>"})},VTK5:function(t,o){},gu9Q:function(t,o){},vdqc:function(t,o){}},["NHnr"]);
//# sourceMappingURL=app.1b8f602db13971cedc0a.js.map